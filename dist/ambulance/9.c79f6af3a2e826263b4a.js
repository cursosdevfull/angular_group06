(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{zrcO:function(t,e,a){"use strict";a.r(e),a.d(e,"UsersModule",function(){return $});var o=a("ofXK"),s=a("tyNb"),r=a("fXoL"),i=a("cmSp"),n=a("lbKw"),c=a("mscp"),l=a("bEII"),u=a("NkUP"),b=a("miTN"),d=a("3S9H");class p{mapping(t){return t.map(t=>({"Nombre Completo":t.nombre,"Correo electr\xf3nico":t.correo}))}}var m=a("AytR"),h=a("3Pt+"),f=a("0IaG"),R=a("/t3+"),g=a("XiUz"),y=a("bTqV"),v=a("NFeN"),S=a("kmnG"),C=a("qFsG");function A(t,e){1&t&&(r.Sb(0,"span",9),r.Ec(1," Campos inv\xe1lidos "),r.Rb())}let w=(()=>{class t{constructor(t,e){var a,o;this.data=t,this.reference=e,this.title="",this.fg=new h.d({id:new h.b(null===(a=this.data)||void 0===a?void 0:a.id),nombre:new h.b(null===(o=this.data)||void 0===o?void 0:o.nombre,h.m.required)})}ngOnInit(){this.title=this.data?"Edici\xf3n":"Nuevo"}save(){this.fg.valid&&this.reference.close(this.fg.value)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(f.a),r.Mb(f.f))},t.\u0275cmp=r.Gb({type:t,selectors:[["amb-form-user"]],decls:22,vars:3,consts:[["fxLayout","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],["fxLayout","column",3,"formGroup"],["appearance","outline"],["type","text","matInput","","formControlName","nombre","required",""],["fxLayout","","fxLayoutAlign","space-between center","fxLayoutGap","20px"],["class","error",4,"ngIf"],["mat-button","","mat-dialog-close","","color","primary","type","button"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"error"]],template:function(t,e){1&t&&(r.Sb(0,"mat-toolbar",0),r.Sb(1,"h3"),r.Ec(2),r.Rb(),r.Sb(3,"button",1),r.Sb(4,"mat-icon"),r.Ec(5,"close"),r.Rb(),r.Rb(),r.Rb(),r.Sb(6,"mat-dialog-content"),r.Sb(7,"form",2),r.Sb(8,"mat-form-field",3),r.Sb(9,"mat-label"),r.Ec(10,"Nombre"),r.Rb(),r.Nb(11,"input",4),r.Sb(12,"mat-error"),r.Ec(13,"Este campo es obligatorio"),r.Rb(),r.Rb(),r.Sb(14,"div",5),r.Sb(15,"div"),r.Cc(16,A,2,0,"span",6),r.Rb(),r.Sb(17,"div"),r.Sb(18,"button",7),r.Ec(19," Cancelar "),r.Rb(),r.Sb(20,"button",8),r.ac("click",function(){return e.save()}),r.Ec(21," Guardar "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Ab(2),r.Fc(e.title),r.Ab(5),r.jc("formGroup",e.fg),r.Ab(9),r.jc("ngIf",e.fg.invalid))},directives:[R.a,g.c,g.b,y.a,f.c,v.a,f.d,h.n,h.i,h.e,S.c,S.f,C.a,h.a,h.h,h.c,h.l,S.b,g.d,o.k],styles:[".container-modal{width:600px}.container-modal mat-dialog-container{padding:0}.container-modal mat-dialog-content{margin:0;padding:24px}.container-modal mat-toolbar{color:444;border-bottom:1px solid grey;background:#ecedec;background:linear-gradient(#fff,#e0e0e0)}.error{font-style:italic;font-size:12px;color:red}"],encapsulation:2}),t})();var k=a("kh7C");class I{}let P=(()=>{class t{constructor(t){this.userRepository=t}listAll(){return this.userRepository.listAll()}insert(t){return this.userRepository.insert(t)}listByPage(t,e){return this.userRepository.listByPage(t,e)}delete(t){return this.userRepository.delete(t)}update(t){return this.userRepository.update(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(I))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();var x=a("Kdsb"),E=a("Xv+k"),N=a("+0xr"),B=a("Qu3c");function D(t,e){1&t&&r.Nb(0,"th",7)}function G(t,e){if(1&t){const t=r.Tb();r.Sb(0,"td",8),r.Sb(1,"button",9),r.Sb(2,"mat-icon"),r.Ec(3,"edit"),r.Rb(),r.Rb(),r.Sb(4,"button",10),r.ac("click",function(){r.tc(t);const a=e.$implicit;return r.ec().delete(a)}),r.Sb(5,"mat-icon"),r.Ec(6,"delete"),r.Rb(),r.Rb(),r.Rb()}}let U=(()=>{class t extends l.a{constructor(t,e){super(),this.utils=t,this.userUseCase=e,this.metaDataColumns=[{field:"nombre",title:"Nombre"},{field:"correo",title:"Correo"}],this.data=[],this.totalRecords=0,this.tipoRoles=d.a,this.listKeyPadButtons=[{icon:"add",color:"primary",action:u.b,tooltip:"AGREGAR USUARIO"},{icon:"cloud_download",color:"accent",action:u.a,tooltip:"EXPORTAR DATA"}],this.list(0)}list(t){this.userUseCase.listByPage(t,m.a.pageSize).subscribe(t=>{this.dataByPage=t.records,this.totalRecords=t.totalRecords})}delete(t){this.utils.confirm("\xbfQuiere eliminar este usuario?").subscribe(e=>{e&&this.userUseCase.delete(t).subscribe(()=>{this.list(0)})})}openForm(t,e=null){null==t||t.stopPropagation(),this.utils.openModal(w,{disableClose:!0,panelClass:"container-modal",data:e}).afterClosed().subscribe(t=>{t&&(t.id?this.userUseCase.update(t).subscribe(t=>{this.list(0)}):(delete t.id,this.userUseCase.insert(t).subscribe(t=>{this.list(0)})))})}openOptionsExport(){this.userUseCase.listAll().subscribe(t=>{const e=new p;this.utils.openSheet(t,e,"Listado de usuarios","usuarios")})}actionButton(t){switch(t){case u.b:this.openForm(null,null);break;case u.a:this.openOptionsExport()}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(k.a),r.Mb(P))},t.\u0275cmp=r.Gb({type:t,selectors:[["amb-list-users"]],viewQuery:function(t,e){if(1&t&&r.Ic(b.a,!0),2&t){let t;r.pc(t=r.bc())&&(e.paginatorComponent=t.first)}},features:[r.xb],decls:7,vars:5,consts:[[1,"heightMaxPerfectScrollbar"],[3,"data","metaDataColumns","totalRecords"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","align-right",4,"matCellDef"],[3,"totalRecords","onDataChange"],[3,"keypadButtons","clickButton"],["mat-header-cell",""],["mat-cell","",1,"align-right"],["mat-button","","color","primary","matTooltip","EDITAR"],["mat-button","","color","accent","matTooltip","ELIMINAR",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"perfect-scrollbar",0),r.Sb(1,"amb-table",1),r.Qb(2,2),r.Cc(3,D,1,0,"th",3),r.Cc(4,G,7,0,"td",4),r.Pb(),r.Rb(),r.Rb(),r.Sb(5,"amb-paginator",5),r.ac("onDataChange",function(t){return e.loadData(t)}),r.Rb(),r.Sb(6,"amb-keypad",6),r.ac("clickButton",function(t){return e.actionButton(t)}),r.Rb()),2&t&&(r.Ab(1),r.jc("data",e.dataByPage)("metaDataColumns",e.metaDataColumns)("totalRecords",e.totalRecords),r.Ab(4),r.jc("totalRecords",e.totalRecords),r.Ab(1),r.jc("keypadButtons",e.listKeyPadButtons))},directives:[x.b,E.a,N.c,N.e,N.b,b.a,u.c,N.d,N.a,y.a,B.a,v.a],styles:[""]}),t})();const L=[{path:"",component:(()=>{class t{constructor(t){this.configService=t,this.configService.configuration={layout:{header:{hidden:!1},menu:{hidden:!1}}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(i.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["amb-page-user"]],decls:3,vars:0,template:function(t,e){1&t&&(r.Nb(0,"amb-title"),r.Sb(1,"amb-container"),r.Nb(2,"amb-list-users"),r.Rb())},directives:[n.a,c.a,U],styles:[""]}),t})()}];let M=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(L)],s.e]}),t})();var j=a("PCNd"),O=a("tk/3");let T=(()=>{class t extends I{constructor(t){super(),this.http=t}listAll(){return this.http.get(m.a.pathAPIRest+"/users")}insert(t){return this.http.post(m.a.pathAPIRest+"/users",t)}listByPage(t,e){return this.http.get(`${m.a.pathAPIRest}/users/page/${t}/${e}`)}delete(t){return this.http.delete(`${m.a.pathAPIRest}/users/${t.id}`)}update(t){const e=Object.assign({},t);return delete e.id,this.http.put(`${m.a.pathAPIRest}/users/${t.id}`,e)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(O.b))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),$=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[{provide:I,useClass:T},P],imports:[[o.c,M,j.a]]}),t})()}}]);