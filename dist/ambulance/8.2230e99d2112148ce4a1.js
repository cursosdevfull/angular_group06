(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/5lw":function(t,e,o){"use strict";o.r(e),o.d(e,"MedicsModule",function(){return X});var a=o("ofXK"),i=o("tyNb"),n=o("fXoL"),r=o("cmSp"),s=o("lbKw"),c=o("mscp");class l{mapping(t){return t.map(t=>({Nombre:t.nombre,Apellido:t.apellido,DNI:t.dni,Correo:t.correo}))}}var d=o("bEII"),u=o("NkUP"),b=o("miTN"),p=o("3S9H"),m=o("AytR"),h=o("3Pt+"),f=o("0IaG"),g=o("/t3+"),v=o("XiUz"),R=o("bTqV"),y=o("NFeN");let C=(()=>{class t{constructor(){this.onHover=new n.o,this.onUpload=new n.o}dragover(t){t.preventDefault(),this.onHover.emit(!0)}dragleave(t){t.preventDefault(),this.onHover.emit(!1)}drop(t){t.preventDefault(),this.onHover.emit(!1),this.onUpload.emit(t.dataTransfer.files[0])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=n.Hb({type:t,selectors:[["","upload",""]],hostBindings:function(t,e){1&t&&n.ac("dragover",function(t){return e.dragover(t)})("dragleave",function(t){return e.dragleave(t)})("drop",function(t){return e.drop(t)})},outputs:{onHover:"onHover",onUpload:"onUpload"}}),t})();var w=o("znSr");const S=["photo"],x=function(t){return{hover:t}};let E=(()=>{class t{constructor(){this.photo=null,this.photoByDefault="",this.statusHover=!1,this.value=null,this.onChange=t=>{},this.onTouch=()=>{}}writeValue(t){t&&(this.value=t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}ngOnInit(){}fileUpload(t){if(!t.type.startsWith("image/"))return;const e=new FileReader;e.onloadend=e=>{this.photo.nativeElement.style.backgroundImage=`url(${e.target.result})`,this.value=t,this.onChange(t),this.onTouch()},e.readAsDataURL(t)}ngAfterViewInit(){this.photoByDefault&&(this.photo.nativeElement.style.backgroundImage=`url(${m.a.pathPhotos+"/"+this.photoByDefault})`)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["amb-photo"]],viewQuery:function(t,e){if(1&t&&n.Ic(S,!0),2&t){let t;n.pc(t=n.bc())&&(e.photo=t.first)}},inputs:{photoByDefault:"photoByDefault"},features:[n.zb([{provide:h.f,useExisting:Object(n.U)(()=>t),multi:!0}])],decls:4,vars:3,consts:[["upload","",1,"container",3,"ngClass","onHover","onUpload"],["photo",""]],template:function(t,e){1&t&&(n.Sb(0,"div",0,1),n.ac("onHover",function(t){return e.statusHover=t})("onUpload",function(t){return e.fileUpload(t)}),n.Rb(),n.Sb(2,"p"),n.Ec(3,"Arrastre una imagen al rect\xe1ngulo superior"),n.Rb()),2&t&&n.jc("ngClass",n.mc(1,x,e.statusHover))},directives:[C,a.i,w.a],styles:[".container[_ngcontent-%COMP%]{width:100%;height:207px;border:1px solid #ccc;background-repeat:no-repeat;background-size:contain;background-position-x:center;background-position-y:center;cursor:pointer;text-align:center;line-height:207px}.container.hover[_ngcontent-%COMP%]{border:1px dashed red}p[_ngcontent-%COMP%]{font-size:12px;font-style:italic;text-align:center}"]}),t})();var A=o("kmnG"),I=o("qFsG");function D(t,e){1&t&&(n.Sb(0,"span",17),n.Ec(1," Campos inv\xe1lidos "),n.Rb())}let k=(()=>{class t{constructor(t,e){var o,a,i,n,r,s,c;this.data=t,this.reference=e,this.title="",this.photoToDisplay="",this.fg=new h.d({id:new h.b(null===(o=this.data)||void 0===o?void 0:o.id),nombre:new h.b(null===(a=this.data)||void 0===a?void 0:a.nombre,h.m.required),segundo_nombre:new h.b(null===(i=this.data)||void 0===i?void 0:i.segundo_nombre,h.m.required),apellido:new h.b(null===(n=this.data)||void 0===n?void 0:n.apellido,h.m.required),cmp:new h.b(null===(r=this.data)||void 0===r?void 0:r.cmp,h.m.required),dni:new h.b(null===(s=this.data)||void 0===s?void 0:s.dni,h.m.required),correo:new h.b(null===(c=this.data)||void 0===c?void 0:c.correo,h.m.required)}),this.data?(this.photoToDisplay=this.data.foto,this.fg.addControl("foto",new h.b(null))):this.fg.addControl("foto",new h.b(null,h.m.required))}ngOnInit(){this.title=this.data?"Edici\xf3n":"Nuevo"}save(){this.fg.valid&&this.reference.close(this.fg.value)}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(f.a),n.Mb(f.f))},t.\u0275cmp=n.Gb({type:t,selectors:[["amb-form-medic"]],decls:57,vars:4,consts:[["fxLayout","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],["fxLayout","column",3,"formGroup"],["fxLayout","","fxLayoutGap","10px"],["fxLayout","column","fxFlex","1 1 33%"],["formControlName","foto",3,"photoByDefault"],["appearance","outline"],["type","text","matInput","","formControlName","nombre","required",""],["type","text","matInput","","formControlName","segundo_nombre","required",""],["type","text","matInput","","formControlName","apellido","required",""],["type","text","matInput","","formControlName","cmp","required",""],["type","text","matInput","","formControlName","dni","required",""],["type","text","matInput","","formControlName","correo","required",""],["fxLayout","","fxLayoutAlign","space-between center","fxLayoutGap","20px"],["class","error",4,"ngIf"],["mat-button","","mat-dialog-close","","color","primary","type","button"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"error"]],template:function(t,e){1&t&&(n.Sb(0,"mat-toolbar",0),n.Sb(1,"h3"),n.Ec(2),n.Rb(),n.Sb(3,"button",1),n.Sb(4,"mat-icon"),n.Ec(5,"close"),n.Rb(),n.Rb(),n.Rb(),n.Sb(6,"mat-dialog-content"),n.Sb(7,"form",2),n.Sb(8,"div",3),n.Sb(9,"div",4),n.Nb(10,"amb-photo",5),n.Rb(),n.Sb(11,"div",4),n.Sb(12,"mat-form-field",6),n.Sb(13,"mat-label"),n.Ec(14,"Nombre"),n.Rb(),n.Nb(15,"input",7),n.Sb(16,"mat-error"),n.Ec(17,"Este campo es obligatorio"),n.Rb(),n.Rb(),n.Sb(18,"mat-form-field",6),n.Sb(19,"mat-label"),n.Ec(20,"Segundo nombre"),n.Rb(),n.Nb(21,"input",8),n.Sb(22,"mat-error"),n.Ec(23,"Este campo es obligatorio"),n.Rb(),n.Rb(),n.Sb(24,"mat-form-field",6),n.Sb(25,"mat-label"),n.Ec(26,"Apellido"),n.Rb(),n.Nb(27,"input",9),n.Sb(28,"mat-error"),n.Ec(29,"Este campo es obligatorio"),n.Rb(),n.Rb(),n.Rb(),n.Sb(30,"div",4),n.Sb(31,"mat-form-field",6),n.Sb(32,"mat-label"),n.Ec(33,"CMP"),n.Rb(),n.Nb(34,"input",10),n.Sb(35,"mat-error"),n.Ec(36,"Este campo es obligatorio"),n.Rb(),n.Rb(),n.Sb(37,"mat-form-field",6),n.Sb(38,"mat-label"),n.Ec(39,"DNI"),n.Rb(),n.Nb(40,"input",11),n.Sb(41,"mat-error"),n.Ec(42,"Este campo es obligatorio"),n.Rb(),n.Rb(),n.Sb(43,"mat-form-field",6),n.Sb(44,"mat-label"),n.Ec(45,"Correo"),n.Rb(),n.Nb(46,"input",12),n.Sb(47,"mat-error"),n.Ec(48,"Este campo es obligatorio"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(49,"div",13),n.Sb(50,"div"),n.Cc(51,D,2,0,"span",14),n.Rb(),n.Sb(52,"div"),n.Sb(53,"button",15),n.Ec(54," Cancelar "),n.Rb(),n.Sb(55,"button",16),n.ac("click",function(){return e.save()}),n.Ec(56," Guardar "),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&t&&(n.Ab(2),n.Fc(e.title),n.Ab(5),n.jc("formGroup",e.fg),n.Ab(3),n.jc("photoByDefault",e.photoToDisplay),n.Ab(41),n.jc("ngIf",e.fg.invalid))},directives:[g.a,v.c,v.b,R.a,f.c,y.a,f.d,h.n,h.i,h.e,v.d,v.a,E,h.h,h.c,A.c,A.f,I.a,h.a,h.l,A.b,a.k],styles:[".container-modal{width:600px}.container-modal mat-dialog-container{padding:0}.container-modal mat-dialog-content{margin:0;padding:24px}.container-modal mat-toolbar{color:444;border-bottom:1px solid grey;background:#ecedec;background:linear-gradient(#fff,#e0e0e0)}.error{font-style:italic;font-size:12px;color:red}"],encapsulation:2}),t})();var N=o("kh7C");class P{}let T=(()=>{class t{constructor(t){this.medicRepository=t}listAll(){return this.medicRepository.listAll()}insert(t){return this.medicRepository.insert(t)}listByPage(t,e){return this.medicRepository.listByPage(t,e)}delete(t){return this.medicRepository.delete(t)}update(t,e){return this.medicRepository.update(t,e)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(P))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac}),t})();var M=o("Kdsb"),U=o("Xv+k"),B=o("+0xr"),O=o("Qu3c"),q=o("QKqO");let H=(()=>{class t{constructor(t,e,o){this.templateRef=t,this.viewContainerRef=e,this.authUseCase=o,this.rolesAllowed=[],this.hasView=!1}ngOnInit(){this.execute()}execute(){const t=this.authUseCase.getStatusUser(),e=this.authUseCase.getFieldInToken("roles");let o=!1;for(const a of this.rolesAllowed)if(e.indexOf(a)>=0){o=!0;break}t&&o&&!this.hasView?(this.viewContainerRef.createEmbeddedView(this.templateRef),this.hasView=!0):(this.viewContainerRef.clear(),this.hasView=!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(n.M),n.Mb(n.Q),n.Mb(q.a))},t.\u0275dir=n.Hb({type:t,selectors:[["","roles-allowed",""]],inputs:{rolesAllowed:["roles-allowed","rolesAllowed"]}}),t})();function G(t,e){1&t&&n.Nb(0,"th",7)}function L(t,e){if(1&t){const t=n.Tb();n.Sb(0,"button",11),n.ac("click",function(e){n.tc(t);const o=n.ec().$implicit;return n.ec().delete(e,o)}),n.Sb(1,"mat-icon"),n.Ec(2,"delete"),n.Rb(),n.Rb()}}const F=function(){return["AUDITOR","MEDIC"]};function j(t,e){if(1&t){const t=n.Tb();n.Sb(0,"td",8),n.Sb(1,"button",9),n.ac("click",function(o){n.tc(t);const a=e.$implicit;return n.ec().openForm(o,a)}),n.Sb(2,"mat-icon"),n.Ec(3,"edit"),n.Rb(),n.Rb(),n.Cc(4,L,3,0,"button",10),n.Rb()}2&t&&(n.Ab(4),n.jc("roles-allowed",n.lc(1,F)))}let $=(()=>{class t extends d.a{constructor(t,e){super(),this.utils=t,this.medicUseCase=e,this.metaDataColumns=[{field:"nombre",title:"Nombre"},{field:"apellido",title:"Apellido"},{field:"cmp",title:"CMP"},{field:"dni",title:"DNI"}],this.data=[],this.totalRecords=0,this.tipoRoles=p.a,this.listKeyPadButtons=[{icon:"add",color:"primary",action:u.b,tooltip:"AGREGAR M\xc9DICO"},{icon:"cloud_download",color:"accent",action:u.a,tooltip:"EXPORTAR DATA"}],this.list(0)}list(t){var e;this.medicUseCase.listByPage(t,m.a.pageSize).subscribe(t=>{this.dataByPage=t.records,this.totalRecords=t.totalRecords}),null===(e=this.paginatorComponent)||void 0===e||e.goToPage(t)}delete(t,e){t.stopPropagation(),this.utils.confirm("\xbfQuiere eliminar este m\xe9dico?").subscribe(t=>{t&&this.medicUseCase.delete(e).subscribe(()=>{this.list(0)})})}openForm(t,e=null){null==t||t.stopPropagation(),this.utils.openModal(k,{disableClose:!0,panelClass:"container-modal",data:e}).afterClosed().subscribe(t=>{if(t)if(t.id){const e=+t.id;delete t.id;const o=this.convertToFormData(t);this.medicUseCase.update(o,e).subscribe(t=>{this.list(0)})}else{delete t.id;const e=this.convertToFormData(t);this.medicUseCase.insert(e).subscribe(t=>{this.list(0)})}})}openOptionsExport(){this.medicUseCase.listAll().subscribe(t=>{const e=new l;this.utils.openSheet(t,e,"Listado de m\xe9dicos","medicos")})}actionButton(t){switch(t){case u.b:this.openForm(null,null);break;case u.a:this.openOptionsExport()}}convertToFormData(t){const e=new FormData;for(const o of Object.keys(t))e.append(o,t[o]);return e}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(N.a),n.Mb(T))},t.\u0275cmp=n.Gb({type:t,selectors:[["amb-list-medics"]],viewQuery:function(t,e){if(1&t&&n.Ic(b.a,!0),2&t){let t;n.pc(t=n.bc())&&(e.paginatorComponent=t.first)}},features:[n.xb],decls:7,vars:5,consts:[[1,"heightMaxPerfectScrollbar"],[3,"data","metaDataColumns","totalRecords"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","align-right",4,"matCellDef"],[3,"totalRecords","onDataChange"],[3,"keypadButtons","clickButton"],["mat-header-cell",""],["mat-cell","",1,"align-right"],["mat-button","","color","primary","matTooltip","EDITAR",3,"click"],["mat-button","","color","accent","matTooltip","ELIMINAR",3,"click",4,"roles-allowed"],["mat-button","","color","accent","matTooltip","ELIMINAR",3,"click"]],template:function(t,e){1&t&&(n.Sb(0,"perfect-scrollbar",0),n.Sb(1,"amb-table",1),n.Qb(2,2),n.Cc(3,G,1,0,"th",3),n.Cc(4,j,5,2,"td",4),n.Pb(),n.Rb(),n.Rb(),n.Sb(5,"amb-paginator",5),n.ac("onDataChange",function(t){return e.loadData(t)}),n.Rb(),n.Sb(6,"amb-keypad",6),n.ac("clickButton",function(t){return e.actionButton(t)}),n.Rb()),2&t&&(n.Ab(1),n.jc("data",e.dataByPage)("metaDataColumns",e.metaDataColumns)("totalRecords",e.totalRecords),n.Ab(4),n.jc("totalRecords",e.totalRecords),n.Ab(1),n.jc("keypadButtons",e.listKeyPadButtons))},directives:[M.b,U.a,B.c,B.e,B.b,b.a,u.c,B.d,B.a,R.a,O.a,y.a,H],styles:[""]}),t})();const K=[{path:"",component:(()=>{class t{constructor(t){this.configService=t,this.configService.configuration={layout:{header:{hidden:!1},menu:{hidden:!1}}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(r.a))},t.\u0275cmp=n.Gb({type:t,selectors:[["amb-page-medic"]],decls:3,vars:0,consts:[["nameTitle","M\xe9dicos"]],template:function(t,e){1&t&&(n.Nb(0,"amb-title",0),n.Sb(1,"amb-container"),n.Nb(2,"amb-list-medics"),n.Rb())},directives:[s.a,c.a,$],styles:[""]}),t})()}];let V=(()=>{class t{}return t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(K)],i.e]}),t})();var z=o("PCNd"),Q=o("tk/3");let _=(()=>{class t extends P{constructor(t){super(),this.http=t}listAll(){return this.http.get(m.a.pathAPIRest+"/medics")}insert(t){return this.http.post(m.a.pathAPIRest+"/medics",t)}listByPage(t,e){return this.http.get(`${m.a.pathAPIRest}/medics/page/${t}/${e}`)}delete(t){return this.http.delete(`${m.a.pathAPIRest}/medics/${t.id}`)}update(t,e){return this.http.put(`${m.a.pathAPIRest}/medics/${e}`,t)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(Q.b))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t{}return t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)},providers:[{provide:P,useClass:_},T],imports:[[a.c,V,z.a]]}),t})()}}]);