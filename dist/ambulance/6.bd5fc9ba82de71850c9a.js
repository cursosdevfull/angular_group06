(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{iQDh:function(t,e,a){"use strict";a.r(e),a.d(e,"DriversModule",function(){return U});var o=a("ofXK"),r=a("tyNb"),i=a("fXoL"),n=a("cmSp"),s=a("lbKw"),c=a("mscp");class l{mapping(t){return t.map(t=>({"Nombre del piloto":t.nombre}))}}var b=a("bEII"),d=a("NkUP"),u=a("miTN"),p=a("3S9H"),m=a("AytR"),h=a("3Pt+"),f=a("0IaG"),v=a("/t3+"),g=a("XiUz"),R=a("bTqV"),y=a("NFeN"),S=a("kmnG"),C=a("qFsG");function A(t,e){1&t&&(i.Sb(0,"span",9),i.Ec(1," Campos inv\xe1lidos "),i.Rb())}let k=(()=>{class t{constructor(t,e){var a,o;this.data=t,this.reference=e,this.title="",this.fg=new h.d({id:new h.b(null===(a=this.data)||void 0===a?void 0:a.id),nombre:new h.b(null===(o=this.data)||void 0===o?void 0:o.nombre,h.m.required)})}ngOnInit(){this.title=this.data?"Edici\xf3n":"Nuevo"}save(){this.fg.valid&&this.reference.close(this.fg.value)}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(f.a),i.Mb(f.f))},t.\u0275cmp=i.Gb({type:t,selectors:[["amb-form-driver"]],decls:22,vars:3,consts:[["fxLayout","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],["fxLayout","column",3,"formGroup"],["appearance","outline"],["type","text","matInput","","formControlName","nombre","required",""],["fxLayout","","fxLayoutAlign","space-between center","fxLayoutGap","20px"],["class","error",4,"ngIf"],["mat-button","","mat-dialog-close","","color","primary","type","button"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"error"]],template:function(t,e){1&t&&(i.Sb(0,"mat-toolbar",0),i.Sb(1,"h3"),i.Ec(2),i.Rb(),i.Sb(3,"button",1),i.Sb(4,"mat-icon"),i.Ec(5,"close"),i.Rb(),i.Rb(),i.Rb(),i.Sb(6,"mat-dialog-content"),i.Sb(7,"form",2),i.Sb(8,"mat-form-field",3),i.Sb(9,"mat-label"),i.Ec(10,"Nombre"),i.Rb(),i.Nb(11,"input",4),i.Sb(12,"mat-error"),i.Ec(13,"Este campo es obligatorio"),i.Rb(),i.Rb(),i.Sb(14,"div",5),i.Sb(15,"div"),i.Cc(16,A,2,0,"span",6),i.Rb(),i.Sb(17,"div"),i.Sb(18,"button",7),i.Ec(19," Cancelar "),i.Rb(),i.Sb(20,"button",8),i.ac("click",function(){return e.save()}),i.Ec(21," Guardar "),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.Ab(2),i.Fc(e.title),i.Ab(5),i.jc("formGroup",e.fg),i.Ab(9),i.jc("ngIf",e.fg.invalid))},directives:[v.a,g.c,g.b,R.a,f.c,y.a,f.d,h.n,h.i,h.e,S.c,S.f,C.a,h.a,h.h,h.c,h.l,S.b,g.d,o.k],styles:[".container-modal{width:600px}.container-modal mat-dialog-container{padding:0}.container-modal mat-dialog-content{margin:0;padding:24px}.container-modal mat-toolbar{color:444;border-bottom:1px solid grey;background:#ecedec;background:linear-gradient(#fff,#e0e0e0)}.error{font-style:italic;font-size:12px;color:red}"],encapsulation:2}),t})();var w=a("kh7C");class P{}let I=(()=>{class t{constructor(t){this.driverRepository=t}listAll(){return this.driverRepository.listAll()}insert(t){return this.driverRepository.insert(t)}listByPage(t,e){return this.driverRepository.listByPage(t,e)}delete(t){return this.driverRepository.delete(t)}update(t){return this.driverRepository.update(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(P))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac}),t})();var x=a("Kdsb"),E=a("Xv+k"),N=a("+0xr"),B=a("Qu3c");function D(t,e){1&t&&i.Nb(0,"th",7)}function G(t,e){if(1&t){const t=i.Tb();i.Sb(0,"td",8),i.Sb(1,"button",9),i.ac("click",function(a){i.tc(t);const o=e.$implicit;return i.ec().openForm(a,o)}),i.Sb(2,"mat-icon"),i.Ec(3,"edit"),i.Rb(),i.Rb(),i.Sb(4,"button",10),i.ac("click",function(a){i.tc(t);const o=e.$implicit;return i.ec().delete(a,o)}),i.Sb(5,"mat-icon"),i.Ec(6,"delete"),i.Rb(),i.Rb(),i.Rb()}}let L=(()=>{class t extends b.a{constructor(t,e){super(),this.utils=t,this.driverUseCase=e,this.metaDataColumns=[{field:"nombre",title:"Nombre principal"}],this.data=[],this.totalRecords=0,this.tipoRoles=p.a,this.listKeyPadButtons=[{icon:"add",color:"primary",action:d.b,tooltip:"AGREGAR PILOTO"},{icon:"cloud_download",color:"accent",action:d.a,tooltip:"EXPORTAR DATA"}],this.list(0)}list(t){var e;this.driverUseCase.listByPage(t,m.a.pageSize).subscribe(t=>{this.dataByPage=t.records,this.totalRecords=t.totalRecords}),null===(e=this.paginatorComponent)||void 0===e||e.goToPage(t)}delete(t,e){t.stopPropagation(),this.utils.confirm(`\xbfQuiere eliminar el piloto "${e.nombre}"?`).subscribe(t=>{t&&this.driverUseCase.delete(e).subscribe(()=>{this.list(0)})})}openForm(t,e=null){null==t||t.stopPropagation(),this.utils.openModal(k,{disableClose:!0,panelClass:"container-modal",data:e}).afterClosed().subscribe(t=>{t&&(t.id?this.driverUseCase.update(t).subscribe(t=>{this.list(0)}):(delete t.id,this.driverUseCase.insert(t).subscribe(t=>{this.list(0)})))})}openOptionsExport(){this.driverUseCase.listAll().subscribe(t=>{const e=new l;this.utils.openSheet(t,e,"Listado de pilotos","pilotos")})}actionButton(t){switch(t){case d.b:this.openForm(null,null);break;case d.a:this.openOptionsExport()}}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(w.a),i.Mb(I))},t.\u0275cmp=i.Gb({type:t,selectors:[["amb-list-drivers"]],viewQuery:function(t,e){if(1&t&&i.Ic(u.a,!0),2&t){let t;i.pc(t=i.bc())&&(e.paginatorComponent=t.first)}},features:[i.xb],decls:7,vars:5,consts:[[1,"heightMaxPerfectScrollbar"],[3,"data","metaDataColumns","totalRecords"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","align-right",4,"matCellDef"],[3,"totalRecords","onDataChange"],[3,"keypadButtons","clickButton"],["mat-header-cell",""],["mat-cell","",1,"align-right"],["mat-button","","color","primary","matTooltip","EDITAR",3,"click"],["mat-button","","color","accent","matTooltip","ELIMINAR",3,"click"]],template:function(t,e){1&t&&(i.Sb(0,"perfect-scrollbar",0),i.Sb(1,"amb-table",1),i.Qb(2,2),i.Cc(3,D,1,0,"th",3),i.Cc(4,G,7,0,"td",4),i.Pb(),i.Rb(),i.Rb(),i.Sb(5,"amb-paginator",5),i.ac("onDataChange",function(t){return e.loadData(t)}),i.Rb(),i.Sb(6,"amb-keypad",6),i.ac("clickButton",function(t){return e.actionButton(t)}),i.Rb()),2&t&&(i.Ab(1),i.jc("data",e.dataByPage)("metaDataColumns",e.metaDataColumns)("totalRecords",e.totalRecords),i.Ab(4),i.jc("totalRecords",e.totalRecords),i.Ab(1),i.jc("keypadButtons",e.listKeyPadButtons))},directives:[x.b,E.a,N.c,N.e,N.b,u.a,d.c,N.d,N.a,R.a,B.a,y.a],styles:[""]}),t})();const T=[{path:"",component:(()=>{class t{constructor(t){this.configService=t,this.configService.configuration={layout:{header:{hidden:!1},menu:{hidden:!1}}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(n.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["amb-page-driver"]],decls:3,vars:0,template:function(t,e){1&t&&(i.Nb(0,"amb-title"),i.Sb(1,"amb-container"),i.Nb(2,"amb-list-drivers"),i.Rb())},directives:[s.a,c.a,L],styles:[""]}),t})()}];let $=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[r.e.forChild(T)],r.e]}),t})();var M=a("PCNd"),j=a("tk/3");let O=(()=>{class t extends P{constructor(t){super(),this.http=t}listAll(){return this.http.get(m.a.pathAPIRest+"/drivers")}insert(t){return this.http.post(m.a.pathAPIRest+"/drivers",t)}listByPage(t,e){return this.http.get(`${m.a.pathAPIRest}/drivers/page/${t}/${e}`)}delete(t){return this.http.delete(`${m.a.pathAPIRest}/drivers/${t.id}`)}update(t){const e=Object.assign({},t);return delete e.id,this.http.put(`${m.a.pathAPIRest}/drivers/${t.id}`,e)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(j.b))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac}),t})(),U=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},providers:[{provide:P,useClass:O},I],imports:[[o.c,$,M.a]]}),t})()}}]);